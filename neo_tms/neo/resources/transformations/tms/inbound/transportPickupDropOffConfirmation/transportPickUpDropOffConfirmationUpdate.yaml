---
- sourceModel: transportPickUpDropOffConfirmation
  targetModel: update_transportPickUpDropOffConfirmation
  sourceCondition:
    customFunction:
      functionName: check_document_action_code_CBR
      functionArgs: [field: transportPickUpDropOffConfirmation.documentActionCode]
  modelMapping:
    segmentListMapping:
      - targetSegment: stopDockCommitment
        fieldMapping:
          - targetField: systemDockCommitmentID
            condition:
              - function:
                  functionName: not_blank
                  fields: transportPickUpDropOffConfirmation.transportPickUpDropOffConfirmationId
            sourceField: transportPickUpDropOffConfirmation.transportPickUpDropOffConfirmationId
          - targetField: commitmentStartDateTime
            condition:
              - function:
                  functionName: not_blank
                  fields: ext_beginTime_pickup
            operations:
              - function:
                  functionName: convertGs1ToLocationDate
                  fields: [ 
                    field: transportPickUpDropOffConfirmation.plannedPickUp.logisticEventPeriod.beginDate, 
                    field: ext_beginTime_pickup, 
                    field: ext_timeZoneOffset, 
                    constant: 'None', 
                    property: default_date_time_format.tpdc_time_format, 
                    property: default_date_time_format.date_format_with_timezone,
                  ]
          - targetField: commitmentEndDateTime
            condition:
              - function:
                  functionName: not_blank
                  fields: ext_endTime_pickup
            operations:
              - function:
                  functionName: convertGs1ToLocationDate
                  fields: [ 
                    field: transportPickUpDropOffConfirmation.plannedPickUp.logisticEventPeriod.endDate, 
                    field: ext_endTime_pickup,
                    field: ext_timeZoneOffset,
                    constant: 'None', 
                    property: default_date_time_format.tpdc_time_format, 
                    property: default_date_time_format.date_format_with_timezone,
                  ]
          - targetField: commitmentStartDateTime
            condition:
              - function:
                  functionName: not_blank
                  fields: ext_beginTime_dropoff
            operations:
              - function:
                  functionName: convertGs1ToLocationDate
                  fields: [ 
                    field: transportPickUpDropOffConfirmation.plannedDropOff.logisticEventPeriod.beginDate, 
                    field: ext_beginTime_dropoff,
                    field: ext_timeZoneOffset,
                    constant: 'None', 
                    property: default_date_time_format.tpdc_time_format, 
                    property: default_date_time_format.date_format_with_timezone,
                  ]
          - targetField: commitmentEndDateTime
            condition:
              - function:
                  functionName: not_blank
                  fields: ext_endTime_dropoff
            operations:
              - function:
                  functionName: convertGs1ToLocationDate
                  fields: [ 
                    field: transportPickUpDropOffConfirmation.plannedDropOff.logisticEventPeriod.endDate, 
                    field: ext_endTime_dropoff, 
                    field: ext_timeZoneOffset, 
                    constant: 'None', 
                    property: default_date_time_format.tpdc_time_format, 
                    property: default_date_time_format.date_format_with_timezone,
                  ]